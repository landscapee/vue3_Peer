/*! Qin Xiao */
(this.webpackJsonp=this.webpackJsonp||[]).push([[3],{183:function(e,t){},184:function(e,t){},185:function(e,t){},186:function(e,t){},187:function(e,t){},188:function(e,t){},388:function(e,t){},389:function(e,t){},413:function(e,t,o){"use strict";o(183)},419:function(e,t,o){"use strict";o(184)},424:function(e,t,o){"use strict";o(185)},425:function(e,t,o){"use strict";o(186)},426:function(e,t,o){"use strict";o(187)},427:function(e,t,o){"use strict";o(188)},598:function(e,t,o){"use strict";o.r(t);var a=o(0);const i=(e=>(Object(a.pushScopeId)("data-v-67b5d8a3"),e=e(),Object(a.popScopeId)(),e))(()=>Object(a.createElementVNode)("div",{id:"cesiumContainer"},null,-1));var c=o(91),n=o.n(c),l=o(87);const r={class:"v-card"},s=(c=e=>(Object(a.pushScopeId)("data-v-52380041"),e=e(),Object(a.popScopeId)(),e))(()=>Object(a.createElementVNode)("span",{class:"tooltip"},"近景",-1)),d=c(()=>Object(a.createElementVNode)("span",{class:"tooltip"},"远景",-1)),m={id:"layerS",class:"v-icon"},p={class:"layerList"},u=["onClick","checked"],b=c(()=>Object(a.createElementVNode)("span",{class:"tooltip"},"共享界面",-1)),h=c(()=>Object(a.createElementVNode)("span",{class:"tooltip"},"数据库",-1)),g=c(()=>Object(a.createElementVNode)("span",{class:"tooltip"},"加标注",-1)),O=c(()=>Object(a.createElementVNode)("span",{class:"tooltip"},"控制面板",-1)),f=c(()=>Object(a.createElementVNode)("span",{class:"tooltip"},"设备状态",-1));c=o(42);var j=o.n(c),v=o(78);o(41);var w=o(86),V=o(610),C=(o(149),o(600));o(109),c=e=>(Object(a.pushScopeId)("data-v-7fc2a648"),e=e(),Object(a.popScopeId)(),e);const y={key:0,class:"dataBaseBox"},N=c(()=>Object(a.createElementVNode)("div",{class:"title"}," 数据库操作 ",-1)),x={class:"optionBox"},k=Object(a.createTextVNode)("导出"),E={class:"tableBox"},T=c(()=>Object(a.createElementVNode)("span",null,"sfsdfsdf",-1));o(85);c=o(2);var _=o.n(c),S=(c={name:"dataBase",data:()=>({tableConfig:[{type:"index",label:"序号",width:49,align:"center"},{label:"ID",prop:"id",format:e=>null==e?void 0:e.id,align:"center"},{label:"触发条件",prop:"Monitor",align:"center"},{label:"监测结果",prop:"Sites",align:"center"},{label:"定位?",prop:"Completed",align:"center"},{label:"位置1",prop:"Loc1",align:"center"},{label:"位置2",prop:"Loc2",align:"center"},{label:"位置3",prop:"Loc3",align:"center"},{label:"位置4",prop:"Loc4",align:"center"},{label:"定位时间",prop:"DoneTime",align:"center"},{label:"项目名称",prop:"ProjName",align:"center"},{slot:"option"}],data:[{prop:"qq",id:"wwww",Monitor:"wwww1"}],showPage:!1}),methods:{open(){this.showPage=!this.showPage},async exportExcel(){}},mounted(){}},o(413),o(26));c=(S=o.n(S))()(c,[["render",function(e,t,o,i,c,n){var l=C.a;const r=V.b;var s=w.a;return c.showPage?(Object(a.openBlock)(),Object(a.createElementBlock)("div",y,[N,Object(a.createElementVNode)("div",x,[Object(a.createVNode)(l,{onClick:n.exportExcel,type:"primary",size:"small"},{default:Object(a.withCtx)(()=>[k]),_:1},8,["onClick"])]),Object(a.createElementVNode)("div",E,[Object(a.createVNode)(s,{data:c.data,"table-config":c.tableConfig},{option:Object(a.withCtx)(()=>[Object(a.createVNode)(r,{label:"操作",fixed:"right",align:"center"},{default:Object(a.withCtx)(({})=>[T]),_:1})]),_:1},8,["data","table-config"])])])):Object(a.createCommentVNode)("v-if",!0)}],["__scopeId","data-v-7fc2a648"]]);const M={key:0,class:"equipmentBox"},I={class:"optionBox"},q=Object(a.createTextVNode)("添加设备"),D={class:"tableBox"},F={type:"text",ref:"input__copy",style:{width:"1px",height:"1px",position:"absolute",background:"transparent",border:"none"}},P={class:"option"},B={class:"cell_status_equi"},L={class:"option"},z={class:"option"};var A=o(605),U=(o(414),o(599)),H=(o(194),o(137)),R=(o(148),e=>(Object(a.pushScopeId)("data-v-8b9608ec"),e=e(),Object(a.popScopeId)(),e));const $={id:"chart__Freq","element-loading-text":"数据加载中。。。","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"},G={class:"formContent"},W={class:"item"},J=Object(a.createTextVNode)(" 中心频率: "),Y=Object(a.createTextVNode)(" MHz "),Q={class:"item"},Z=Object(a.createTextVNode)(" 门限: "),K=Object(a.createTextVNode)(" dBμV "),X={class:"item"},ee=Object(a.createTextVNode)(" 带宽: "),te=Object(a.createTextVNode)(" MHz "),oe={class:"item"},ae=Object(a.createTextVNode)(" 跨距: "),ie=Object(a.createTextVNode)(" MHz "),ce={class:"item"},ne=Object(a.createTextVNode)("开始"),le=Object(a.createTextVNode)("暂停"),re={class:"formContent"},se=R(()=>Object(a.createElementVNode)("div",{class:"item"}," 点击图表获取",-1)),de={class:"item"},me=Object(a.createTextVNode)(" 频率: "),pe=Object(a.createTextVNode)(" MHz "),ue={class:"item"},be=Object(a.createTextVNode)(" 带宽: "),he=Object(a.createTextVNode)(" MHz "),ge={class:"item"},Oe=Object(a.createTextVNode)(" 电平: "),fe=Object(a.createTextVNode)(" dBμV ");var je=o(27),ve=o(611),we=(R={name:"frequencySpectrum",data:()=>({playStatus:!1,code:null,loading:!1,configshow:!0,chart:void 0,formSend:{centerFreq:84.45,refLevel:-30,rbw:.01,span:40},form:{pl:0,dk:0,dp:0},showDia:!0}),methods:{close(){window.addEventListener("UI__EquipmentMessage"+this.code,this.getData),this.code=null,this.loading=!1,this.playStatus=!1,this.showDia=!1,this.stopFreq(),this.chart&&this.chart.destroy(),this.form={pl:0,dk:0,dp:0},this.formSend={centerFreq:84.45,refLevel:-30,rbw:.01,span:40}},stopFreq(){this.loading=!1,this.playStatus=!1,this.$sendMessage("worker__sengMessage",{code:this.code,data:{requestType:"stop",param:{}}})},startFreq(){this.playStatus=!0,this.loading=!0;let e,t={};var o,a,i,c;Object(je.map)(this.formSend,(o,a)=>{Number(o)!=o&&(e=!0),t[a]=Number(o)*Math.pow(10,6),"refLevel"==a&&(t[a]=Number(o))}),e?Object(ve.a)({message:"请输入正确的参数",type:"warning",duration:3e3}):(({centerFreq:o,refLevel:a,rbw:i,span:c}=t),this.$sendMessage("worker__sengMessage",{code:this.code||"A",data:{requestType:"start",param:{centerFreq:o,refLevel:a,rbw:i,span:c}}}))},open({code:e}){this.code=e,this.showDia=!0,window.removeEventListener("UI__EquipmentMessage"+e,this.getData)},showData(e){null==this.chart?this.initGraphic(e):this.chart.series[0].update({data:e.datas})},onclickmy(e,t){console.log(2,e,t),this.form={pl:e.toFixed(3),dk:this.formSend.rbw,dp:t.toFixed(3)}},async initGraphic(e){var t,o,a;document.getElementById("chart__Freq")&&(({freqs:[e,o],datas:t,step:a}=e),this.form.start=e,this.form.end=o,e=(e/1e6).toFixed(3),o=(o/1e6).toFixed(3),a=(a/1e6).toFixed(3),this.chart=Highcharts.chart("chart__Freq",{chart:{zoomType:"x",backgroundColor:"rgba(0,0,0,1)"},exporting:{enabled:!1},boost:{useGPUTranslations:!0},title:{text:`起始频率:${e}MHz,终止频率:${o}MHz`,style:{color:"rgb(255,255,255)"}},subtitle:{text:"",style:{color:"rgb(255,255,255)"}},xAxis:{title:{text:"频率",style:{color:"rgb(255,255,255)"}},labels:{style:{color:"#ffffff"}}},yAxis:{title:{text:"电平值",style:{color:"rgb(255,255,255)"}},labels:{style:{color:"#ffffff"}}},legend:{enabled:!1},plotOptions:{series:{label:{connectorAllowed:!1},color:"rgb(255,255,0)",pointStart:+e,pointInterval:+a}},tooltip:{valueDecimals:2,backgroundColor:"rgba(247,247,247,1)",crosshairs:[{width:1,color:"green"}],shared:!0,formatter:function(){return`<b style="font-size: 12px;font-weight: bold">频率:</b>\n                ${(this.x/1e6).toFixed(3)}MHz</br>\n                 <b style="font-size: 12px;font-weight: bold">电平值:</b>`+this.y}},series:[{data:t,lineWidth:.5,events:{click:e=>{e.point.category,this.onclickmy(e.point.x,e.point.y)}}}]}))},getData({detail:e}){e&&(this.loading=!1,this.showData(e))}}},R=(o(419),S()(R,[["render",function(e,t,o,i,c,n){const l=H.a,r=C.a;var s=U.a;const d=A.a;return Object(a.openBlock)(),Object(a.createBlock)(s,{"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!1,"append-to-body":!0,title:"频谱",center:!0,"before-close":n.close,modelValue:c.showDia,"onUpdate:modelValue":t[7]||(t[7]=e=>c.showDia=e)},{default:Object(a.withCtx)(()=>[Object(a.withDirectives)(Object(a.createElementVNode)("div",$,null,512),[[d,c.loading]]),c.configshow?(Object(a.openBlock)(),Object(a.createElementBlock)(a.Fragment,{key:0},[Object(a.createElementVNode)("div",G,[Object(a.createElementVNode)("div",W,[J,Object(a.createVNode)(l,{size:"small",modelValue:c.formSend.centerFreq,"onUpdate:modelValue":t[0]||(t[0]=e=>c.formSend.centerFreq=e)},{suffix:Object(a.withCtx)(()=>[Y]),_:1},8,["modelValue"])]),Object(a.createElementVNode)("div",Q,[Z,Object(a.createVNode)(l,{size:"small",modelValue:c.formSend.refLevel,"onUpdate:modelValue":t[1]||(t[1]=e=>c.formSend.refLevel=e)},{suffix:Object(a.withCtx)(()=>[K]),_:1},8,["modelValue"])]),Object(a.createElementVNode)("div",X,[ee,Object(a.createVNode)(l,{size:"small",modelValue:c.formSend.rbw,"onUpdate:modelValue":t[2]||(t[2]=e=>c.formSend.rbw=e)},{suffix:Object(a.withCtx)(()=>[te]),_:1},8,["modelValue"])]),Object(a.createElementVNode)("div",oe,[ae,Object(a.createVNode)(l,{size:"small",modelValue:c.formSend.span,"onUpdate:modelValue":t[3]||(t[3]=e=>c.formSend.span=e)},{suffix:Object(a.withCtx)(()=>[ie]),_:1},8,["modelValue"])]),Object(a.createElementVNode)("div",ce,[Object(a.createVNode)(r,{onClick:n.startFreq,type:"primary",size:"small"},{default:Object(a.withCtx)(()=>[ne]),_:1},8,["onClick"]),Object(a.createVNode)(r,{disabled:!c.playStatus,onClick:n.stopFreq,type:"primary",size:"small"},{default:Object(a.withCtx)(()=>[le]),_:1},8,["disabled","onClick"])])]),Object(a.createElementVNode)("div",re,[se,Object(a.createElementVNode)("div",de,[me,Object(a.createVNode)(l,{size:"small",modelValue:c.form.pl,"onUpdate:modelValue":t[4]||(t[4]=e=>c.form.pl=e)},{suffix:Object(a.withCtx)(()=>[pe]),_:1},8,["modelValue"])]),Object(a.createElementVNode)("div",ue,[be,Object(a.createVNode)(l,{size:"small",modelValue:c.form.dk,"onUpdate:modelValue":t[5]||(t[5]=e=>c.form.dk=e)},{suffix:Object(a.withCtx)(()=>[he]),_:1},8,["modelValue"])]),Object(a.createElementVNode)("div",ge,[Oe,Object(a.createVNode)(l,{size:"small",modelValue:c.form.dp,"onUpdate:modelValue":t[6]||(t[6]=e=>c.form.dp=e)},{suffix:Object(a.withCtx)(()=>[fe]),_:1},8,["modelValue"])])])],64)):Object(a.createCommentVNode)("v-if",!0)]),_:1},8,["before-close","modelValue"])}],["__scopeId","data-v-8b9608ec"]])),o(601));o(420),o(422);const Ve={class:"divItem"},Ce={class:"divItem"},ye=Object(a.createTextVNode)("定位"),Ne={class:"divItem"},xe={class:"footer"},ke=Object(a.createTextVNode)("取消"),Ee=Object(a.createTextVNode)("确认");var Te=o(19),_e={name:"add",data:()=>({showDia:!0,title:"设备新增",form:{},rules:{name:[{required:!0,message:"请输入",trigger:"blur"}]},isAdd:!0,currentPosition:{}}),methods:{async submitForm(e){await this.$refs[e].validate(e=>{if(e){e={...this.form};let t="/apioet/equipment/updateEquipment";this.isAdd&&(t="/apioet/equipment/addEquipment"),this.$axios.post(t,e).then(e=>{this.$message.success("操作成功！")})}})},selectPosition(){console.log("ddd"),this.displayAllDialog("none");var{lon:e,lat:t,mapView:o}=this.form;t&&e&&(this.addPointIcon(e,t),o?Te.a.flyToByView(JSON.parse(o)):Te.a.flyTo(e,t,2e3))},close(){this.form={},this.isAdd=!0,this.showDia=!1,this.$refs.ruleFormRef.clearValidate(),Te.a.Theme.unSubscribeTheme(Te.a.themeType.MapClick,this.updatePosition),Te.a.Theme.unSubscribeTheme(Te.a.themeType.MapRightClicked,this.confirmPosition)},open(e){console.log(222,e),this.showDia=!0,this.title="设备新增",e&&(this.isAdd=!1,this.title="设备编辑",this.form={...e}),Te.a.Theme.subscribeTheme(Te.a.themeType.MapClick,this.updatePosition),Te.a.Theme.subscribeTheme(Te.a.themeType.MapRightClicked,this.confirmPosition)},updatePosition(e){var[e,t]=e;this.addPointIcon(e,t)},confirmPosition(e){var{lon:t,lat:o,id:a}=this.currentPosition,[,,,,e]=e;this.$set(this.form,"lon",(+t).toFixed(6)),this.$set(this.form,"lat",(+o).toFixed(6)),this.$set(this.form,"mapView",j()(e)),this.displayAllDialog("inline"),a&&(this.currentPosition.id="",Te.a.FeatureManager.removeFeature(a))},displayAllDialog(e){var t=document.getElementsByClassName("el-overlay");Object(je.map)(t,t=>{t.style.display=e})},addPointIcon(e,t){this.currentPosition.id&&Te.a.FeatureManager.removeFeature(this.currentPosition.id);var o=Te.a.FeatureManager.addPointIcon({lon:e,lat:t,scale:.15}).id;this.currentPosition={id:o,lon:e,lat:t}}}};o(424),R={name:"equipmentList",components:{FrequencySpectrum:R,Add__equipment:S()(_e,[["render",function(e,t,o,i,c,n){const l=H.a,r=we.b,s=C.a,d=we.a;var m=U.a;return Object(a.openBlock)(),Object(a.createBlock)(m,{"append-to-body":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!1,title:c.title,center:!0,"before-close":n.close,modelValue:c.showDia,"onUpdate:modelValue":t[6]||(t[6]=e=>c.showDia=e)},{default:Object(a.withCtx)(()=>[Object(a.createVNode)(d,{ref:"ruleFormRef",model:c.form,rules:c.rules,"label-width":"80px",class:"demo-ruleForm",size:"small","status-icon":""},{default:Object(a.withCtx)(()=>[Object(a.createElementVNode)("div",Ve,[Object(a.createVNode)(r,{label:"设备名称：",prop:"name"},{default:Object(a.withCtx)(()=>[Object(a.createVNode)(l,{modelValue:c.form.name,"onUpdate:modelValue":t[0]||(t[0]=e=>c.form.name=e)},null,8,["modelValue"])]),_:1}),Object(a.createVNode)(r,{label:"设别编号：",prop:"code"},{default:Object(a.withCtx)(()=>[Object(a.createVNode)(l,{modelValue:c.form.code,"onUpdate:modelValue":t[1]||(t[1]=e=>c.form.code=e)},null,8,["modelValue"])]),_:1})]),Object(a.createElementVNode)("div",Ce,[Object(a.createVNode)(r,{label:"经度：",prop:"lon"},{default:Object(a.withCtx)(()=>[Object(a.createVNode)(l,{modelValue:c.form.lon,"onUpdate:modelValue":t[2]||(t[2]=e=>c.form.lon=e)},null,8,["modelValue"]),Object(a.createVNode)(s,{onClick:n.selectPosition,type:"primary"},{default:Object(a.withCtx)(()=>[ye]),_:1},8,["onClick"])]),_:1}),Object(a.createVNode)(r,{label:"纬度：",prop:"lat"},{default:Object(a.withCtx)(()=>[Object(a.createVNode)(l,{modelValue:c.form.lat,"onUpdate:modelValue":t[3]||(t[3]=e=>c.form.lat=e)},null,8,["modelValue"])]),_:1})]),Object(a.createElementVNode)("div",Ne,[Object(a.createVNode)(r,{label:"设备类型：",prop:"type"},{default:Object(a.withCtx)(()=>[Object(a.createVNode)(l,{modelValue:c.form.type,"onUpdate:modelValue":t[4]||(t[4]=e=>c.form.type=e)},null,8,["modelValue"])]),_:1})]),Object(a.createElementVNode)("div",xe,[Object(a.createVNode)(s,{onClick:n.close},{default:Object(a.withCtx)(()=>[ke]),_:1},8,["onClick"]),Object(a.createVNode)(s,{type:"primary",onClick:t[5]||(t[5]=e=>n.submitForm("ruleFormRef"))},{default:Object(a.withCtx)(()=>[Ee]),_:1})])]),_:1},8,["model","rules"])]),_:1},8,["title","before-close","modelValue"])}]])},data:()=>({tableConfig:[{type:"index",label:"序号",width:49,align:"center"},{label:"设备名称",prop:"name",align:"center"},{label:"设备编号",prop:"code",align:"center"},{label:"设备类型",prop:"type",align:"center"},{slot:"position"},{label:"IP端口",prop:"ip",align:"center"},{slot:"status"},{label:"创建时间",prop:"createTime",align:"center",format:e=>e.createTime?_()(e.createTime).format("YYYY-MM-DD HH:mm:ss"):"--"},{slot:"equipmentManage"},{slot:"option"}],showPage:!0}),computed:{getTableData(){return this.$store.state.globalData.equipmentList},getStatusVal:()=>e=>({0:"离线",1:"故障",2:"在线"}[e]),getStatusColor:()=>e=>({0:"#f82206",1:"#f18d1b",2:"#0889e5"}[e])},methods:{addEdit(e){this.$refs.Add__equipment.open(e)},deleteRow({id:e,status:t}){2==t?this.$message.warning("此设备为在线状态，请下线后再删除"):this.$confirm("此操作将永久删除该信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.getData.post("/apioet/equipment/deleteEquipment?id="+e).then(e=>{this.$message({type:"success",message:"删除成功"})})}).catch(()=>{this.$message({type:"info",message:"已取消删除"})})},online({code:e}){this.$sendMessage("worker__sengMessage",[{code:e}])},offline(e){},restart(e){},toPosition({lat:e,lon:t}){e&&t&&null!==Te.a&&void 0!==Te.a&&Te.a.flyTo(t,e,3e3)},copy({lat:e,lon:t}){let o=this.$refs.input__copy,a=(o.value=t+","+e,document.createRange());a.selectNode(o),window.getSelection().removeAllRanges(),window.getSelection().addRange(a),document.execCommand("copy"),o.value=""},open(){this.showPage=!this.showPage},getList(){}},created(){},mounted(){this.getList(),window.dispatchEvent(new CustomEvent("myWorker__",{detail:{type:"worker__initEquipmentsSocket",aaa:1}}))}},o(425),_e={name:"ToolBar",data:()=>({tableConfig:[{label:"设备",prop:"Monitor",width:"30px"},{label:"IP地址",prop:"Monitor",width:"100px"},{label:"状态",prop:"Monitor",width:"30px"},{label:"显示",prop:"Monitor",width:"30px"}]}),components:{DataBse:c,EquipmentList:S()(R,[["render",function(e,t,o,i,c,n){var r=C.a;const s=l.a,d=V.b;var m=w.a,p=Object(a.resolveComponent)("Add__equipment");return c.showPage?(Object(a.openBlock)(),Object(a.createElementBlock)("div",M,[Object(a.createElementVNode)("div",{class:"title",onClick:t[0]||(t[0]=(...e)=>n.getList&&n.getList(...e))}," 设备管理 "),Object(a.createElementVNode)("div",I,[Object(a.createVNode)(r,{onClick:t[1]||(t[1]=e=>n.addEdit(null)),type:"primary",size:"small"},{default:Object(a.withCtx)(()=>[q]),_:1})]),Object(a.createElementVNode)("div",D,[Object(a.createCommentVNode)("                input元素是 copy功能需要的"),Object(a.createElementVNode)("input",F,null,512),Object(a.createVNode)(m,{data:n.getTableData,"table-config":c.tableConfig},{position:Object(a.withCtx)(()=>[Object(a.createVNode)(d,{label:"位置",width:"55",align:"center"},{default:Object(a.withCtx)(({row:e})=>[Object(a.createElementVNode)("div",P,[Object(a.createVNode)(s,{onClick:t=>n.toPosition(e),title:"定位","icon-class":"position"},null,8,["onClick"]),Object(a.createVNode)(s,{onClick:t=>n.copy(e),title:"复制坐标","icon-class":"copy"},null,8,["onClick"])])]),_:1})]),status:Object(a.withCtx)(()=>[Object(a.createVNode)(d,{label:"设备状态",align:"center"},{default:Object(a.withCtx)(({row:e})=>[Object(a.createElementVNode)("div",B,[Object(a.createElementVNode)("span",{style:Object(a.normalizeStyle)({background:n.getStatusColor(e.status)})},null,4),Object(a.createTextVNode)(" "+Object(a.toDisplayString)(n.getStatusVal(e.status)),1)])]),_:1})]),equipmentManage:Object(a.withCtx)(()=>[Object(a.createVNode)(d,{label:"设备管理",align:"center"},{default:Object(a.withCtx)(({row:e})=>[Object(a.createElementVNode)("div",L,[Object(a.createVNode)(s,{onClick:t=>n.online(e),title:"上线","icon-class":"online"},null,8,["onClick"]),Object(a.createVNode)(s,{onClick:t=>n.offline(e),title:"下线","icon-class":"offline"},null,8,["onClick"]),Object(a.createVNode)(s,{onClick:t=>n.restart(e),title:"重启","icon-class":"restart"},null,8,["onClick"])])]),_:1})]),option:Object(a.withCtx)(()=>[Object(a.createVNode)(d,{label:"操作",width:"70",fixed:"right",align:"center"},{default:Object(a.withCtx)(({row:e})=>[Object(a.createElementVNode)("div",z,[Object(a.createVNode)(s,{onClick:t=>n.addEdit(e),title:"编辑","icon-class":"edit"},null,8,["onClick"]),Object(a.createVNode)(s,{onClick:t=>n.deleteRow(e),title:"删除","icon-class":"remove"},null,8,["onClick"])])]),_:1})]),_:1},8,["data","table-config"])]),Object(a.createVNode)(p,{ref:"Add__equipment"},null,512),Object(a.createCommentVNode)('    <FrequencySpectrum ref="FrequencySpectrum"></FrequencySpectrum>')])):Object(a.createCommentVNode)("v-if",!0)}],["__scopeId","data-v-07a1d566"]])},setup(e,{}){const t=Object(a.getCurrentInstance)();var i;i=[623820,4531273],v.a.defs("EPSG:4547","+proj=tmerc +lat_0=0 +lon_0=114 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),v.a.defs("EPSG:4326","+proj=longlat +datum=WGS84 +no_defs");const c=Object(v.a)("EPSG:4547","EPSG:4326",i),n=()=>{var e=[103.87678531322403,30.659231957350197];viewer.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(e[0],e[1],2350),duration:1,orientation:{heading:Cesium.Math.toRadians(-0),pitch:Cesium.Math.toRadians(-90),roll:0}})},l=e=>{console.log(e);var t={"World Imagery":new Cesium.UrlTemplateImageryProvider({url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",maximumLevel:19,credit:"©Esri"}),OpenStreetMap:new Cesium.UrlTemplateImageryProvider({url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",maximumLevel:19,credit:"©OpenStreetMap"})};viewer.imageryLayers.remove(viewer.imageryLayers.get(0)),t=viewer.imageryLayers.addImageryProvider(t[e]);viewer.imageryLayers.lowerToBottom(t)};let r;return Object(a.onMounted)(()=>{l("World Imagery"),n()}),{providerNames:["World Imagery","OpenStreetMap"],changeBasemap:l,goHome:()=>{viewer.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(c[0],c[1],1e7),duration:1,orientation:{heading:Cesium.Math.toRadians(0),pitch:Cesium.Math.toRadians(-88.8),roll:0}})},goModel:n,start_cast:async()=>{r&&r.close();let e=o(41);r=new WebSocket("ws://192.168.0.85:3000?qq=wwww");try{let t=new e({initiator:!0,stream:await navigator.mediaDevices.getDisplayMedia({audio:!1,video:!0})});t.on("signal",(function(e){r.send(j()(e))})),r.addEventListener("message",e=>{(e=JSON.parse(e.data)).type&&"answer"!=e.type&&t.signal(JSON.parse(e))})}catch(e){console.log(e)}},show_database:function(){t.refs.DataBse.open()},iShowPinSet:()=>{},openEquipment:()=>{t.refs.EquipmentList.open()}}}},o(426),c={name:"CesiumMap",components:{ToolBar:S()(_e,[["render",function(e,t,o,i,c,n){var j=l.a,v=Object(a.resolveComponent)("DataBse"),w=Object(a.resolveComponent)("EquipmentList");return Object(a.openBlock)(),Object(a.createElementBlock)(a.Fragment,null,[Object(a.createElementVNode)("div",r,[Object(a.createElementVNode)("div",null,[Object(a.createElementVNode)("button",{onClick:t[0]||(t[0]=(...e)=>i.goModel&&i.goModel(...e)),class:"v-icon"},[Object(a.createVNode)(j,{iconClass:"expand-arrows-alt",size:"2px"}),s]),Object(a.createElementVNode)("button",{onClick:t[1]||(t[1]=(...e)=>i.goHome&&i.goHome(...e)),class:"v-icon"},[Object(a.createVNode)(j,{iconClass:"compress-arrows-alt"}),d])]),Object(a.createElementVNode)("div",null,[Object(a.createElementVNode)("button",m,[Object(a.createVNode)(j,{iconClass:"layer-group"}),Object(a.createElementVNode)("div",p,[(Object(a.openBlock)(!0),Object(a.createElementBlock)(a.Fragment,null,Object(a.renderList)(i.providerNames,(e,t)=>(Object(a.openBlock)(),Object(a.createElementBlock)("label",{key:t,class:"layerClass"},[Object(a.createElementVNode)("input",{type:"radio",value:"idx",name:"basemap",onClick:t=>i.changeBasemap(e),checked:0==t},null,8,u),Object(a.createElementVNode)("span",null,Object(a.toDisplayString)(e),1)]))),128))])]),Object(a.createElementVNode)("button",{onClick:t[2]||(t[2]=(...e)=>i.start_cast&&i.start_cast(...e)),class:"v-icon"},[Object(a.createVNode)(j,{iconClass:"tv"}),b]),Object(a.createElementVNode)("button",{onClick:t[3]||(t[3]=(...e)=>i.show_database&&i.show_database(...e)),class:"v-icon"},[Object(a.createVNode)(j,{iconClass:"database"}),h]),Object(a.createElementVNode)("button",{onClick:t[4]||(t[4]=(...e)=>i.iShowPinSet&&i.iShowPinSet(...e)),class:"v-icon"},[Object(a.createVNode)(j,{iconClass:"map-marker"}),g])]),Object(a.createElementVNode)("div",null,[Object(a.createElementVNode)("button",{onClick:t[5]||(t[5]=t=>e.iShowForm=!e.iShowForm),class:"v-icon"},[Object(a.createVNode)(j,{iconClass:"cog"}),O]),Object(a.createElementVNode)("button",{onClick:t[6]||(t[6]=(...e)=>i.openEquipment&&i.openEquipment(...e)),class:"v-icon"},[Object(a.createVNode)(j,{iconClass:"clipboard"}),f])])]),Object(a.createVNode)(v,{ref:"DataBse"},null,512),Object(a.createVNode)(w,{ref:"EquipmentList"},null,512)],64)}],["__scopeId","data-v-52380041"]])},setup(){let e=Object(a.ref)(!1);window.viewer=null,Cesium.Ion.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyMWJlMDk2My0xN2Y1LTQ5NTAtODg4OS01MDc1OTQ4NTQyNjIiLCJpZCI6ODY1OSwic2NvcGVzIjpbImFzbCIsImFzciIsImFzdyIsImdjIl0sImFzc2V0cyI6WzFdLCJpYXQiOjE1NTI0NjIyMjl9.QPT92mutlw-Pjr-FTGhVq4svbkRzXvkKkk8u-Ev1BfE";let t={baseLayerPicker:!1,geocoder:!1,imageryProvider:!1,homeButton:!1,navigationHelpButton:!1,infoBox:!1,animation:!1,timeline:!1,fullscreenButton:!1,terrainProvider:new Cesium.CesiumTerrainProvider({url:"http://localhost:809/terrain/"}),skyBox:!1,automaticallyTrackDataSourceClocks:!1,sceneModePicker:!1,scene3DOnly:!0},o=[],i=Object(a.ref)("");return Object(a.onMounted)(()=>{window.viewer=new Cesium.Viewer("cesiumContainer",t),viewer._cesiumWidget._creditContainer.style.display="none",viewer.scene.light=new Cesium.DirectionalLight({direction:new Cesium.Cartesian3(.354925916,-.8909182691839,-.283358839)}),viewer.scene.debugShowFramesPerSecond=!1,viewer.scene.screenSpaceCameraController.minimumZoomDistance=1,viewer.scene.screenSpaceCameraController.maximumZoomDistance=59e6,viewer.scene.fog.enabled=!1,viewer.scene.fxaa=!0,viewer.scene.requestRender(),viewer.scene.screenSpaceCameraController.minimumZoomDistance=140,viewer.scene.screenSpaceCameraController.maximumZoomDistance=59e6,viewer.resolutionScale=1,viewer.scene.postProcessStages.fxaa.enabled=!1,viewer.scene.globe.depthTestAgainstTerrain=!0,viewer.automaticallyTrackDataSourceClocks=!1,viewer.scene.globe.baseColor=new Cesium.Color(0,0,0,.5),viewer._cesiumWidget._creditContainer.style.display="none",e.value=!0;{let e=new Cesium.ScreenSpaceEventHandler(viewer.scene.canvas);e.setInputAction((function(e){if(e&&(e=viewer.scene.pickPosition(e.endPosition),Cesium.defined(e))){var t=e.x,o=e.y;e=e.z;let a=viewer.scene.globe.ellipsoid;t=new Cesium.Cartesian3(t,o,e);let c=a.cartesianToCartographic(t),n=Cesium.Math.toDegrees(c.latitude),l=Cesium.Math.toDegrees(c.longitude);i.value="位置:"+l.toFixed(6)+","+n.toFixed(6)+","+c.height.toFixed(1)}}),Cesium.ScreenSpaceEventType.MOUSE_MOVE),e.setInputAction((function(){var e=Math.ceil(viewer.camera.positionCartographic.height);Te.a.Theme.publishTheme(Te.a.themeType.MapHeightViewChanged,e),window.mapHeight=e}),Cesium.ScreenSpaceEventType.WHEEL),e.setInputAction((function(e){var t=viewer.scene.pickPosition(e.position);if(console.log("left",Cesium.defined(t)),Cesium.defined(t)){var a=t.x,i=t.y;t=t.z;let n=viewer.scene.globe.ellipsoid;a=new Cesium.Cartesian3(a,i,t),i=n.cartesianToCartographic(a),t=Cesium.Math.toDegrees(i.latitude),a=Cesium.Math.toDegrees(i.longitude);var c=(console.log(a+" "+t+","),o.push([a,t]),Te.a.Theme.publishTheme(Te.a.themeType.MapClick,[a,t,i.height,e.position,{direction:viewer.camera.direction,position:viewer.camera.position,right:viewer.camera.right,up:viewer.camera.up}]),viewer.scene.pick(e.position));!c||(c=c.id)&&Te.a.Theme.publishTheme(Te.a.themeType.FeatureClick,[c,[a,t,i.height],e.position])}}),Cesium.ScreenSpaceEventType.LEFT_CLICK),e.setInputAction((function(e){var t=viewer.scene.pickPosition(e.position);if(Cesium.defined(t)){var a=t.x,i=t.y;t=t.z;let o=viewer.scene.globe.ellipsoid;a=new Cesium.Cartesian3(a,i,t),i=o.cartesianToCartographic(a),t=Cesium.Math.toDegrees(i.latitude);var c=Cesium.Math.toDegrees(i.longitude);!(a=(console.log("["+c+","+t+","+i.height+"]","["+a.x+","+a.y+"]"),Te.a.Theme.publishTheme(Te.a.themeType.MapRightClicked,[c,t,i.height,e.position,{direction:viewer.camera.direction,position:viewer.camera.position,right:viewer.camera.right,up:viewer.camera.up}]),viewer.scene.pick(e.position)))||(a=a.id)&&Te.a.Theme.publishTheme(Te.a.themeType.FeatureClick,[a,[c,t,i.height],e.position])}let l="POLYGON((";o.length&&(n()(o).call(o,e=>{l+=e[0]+" "+e[1]+","}),l+=o[0][0]+" "+o[0][1]+" ))",console.log(l),o.length=0)}),Cesium.ScreenSpaceEventType.RIGHT_CLICK)}}),{mounted:e}},methods:{},mounted(){}};o(427),t.default=S()(c,[["render",function(e,t,o,c,n,l){var r=Object(a.resolveComponent)("ToolBar");return Object(a.openBlock)(),Object(a.createElementBlock)(a.Fragment,null,[i,c.mounted?(Object(a.openBlock)(),Object(a.createBlock)(r,{key:0,ref:"ToolBar1"},null,512)):Object(a.createCommentVNode)("v-if",!0)],64)}],["__scopeId","data-v-67b5d8a3"]])}}]);