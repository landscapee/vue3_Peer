/*! Qin Xiao */
(this.webpackJsonp=this.webpackJsonp||[]).push([[7],{388:function(e,t){},389:function(e,t){},603:function(e,t,s){"use strict";s.r(t);var n=s(0);const o={class:"peer"},r={ref:"video",style:{height:"200px"}};var c=s(42),i=s.n(c),l=(c=s(72),s.n(c)),a=(c=s(41),s.n(c)),p=(c={name:"App",data:()=>({socket:null,peer1:null,peer2:null,stream:null}),components:{},methods:{open(){const e=new WebSocket("ws://192.168.0.85:3000?qqqqqqqqqqqqqqqqqqqq=wwww");(this.socket=e).addEventListener("open",e=>{this.openMedia()});let t={};e.addEventListener("message",e=>{e=JSON.parse(e.data),console.log("..22222...",e),e.type&&!t[e.type]&&"answer"!=e.type&&e.type&&this.peer2.signal(e)}),e.addEventListener("close",(function(e){console.log("close ",e)})),e.addEventListener("error",(function(e){console.log("error ",e)})),addEventListener("beforeunload",t=>{e.close()})},close(){this.socket&&this.socket.close()},closeMedia(){this.peer1.removeStream()},startMedia(e){this.peer1.addStream(e)},async openMedia(){this.peer2=new a.a,this.peer2.on("signal",e=>{console.log("peer2_signal",e),this.socket.send(i()(e))}),this.peer2.on("stream",e=>{console.log("peer2   stream",e);let t=document.querySelector("video");"srcObject"in t?t.srcObject=e:t.src=l.a.createObjectURL(e),t.play()})}},mounted(){this.open()},beforeUnmount(){this.socket&&this.socket.close(),this.peer1.destroy(),this.peer2.destroy()}},s(26));s=s.n(p);t.default=s()(c,[["render",function(e,t,s,c,i,l){return Object(n.openBlock)(),Object(n.createElementBlock)("div",o,[Object(n.createElementVNode)("video",r,null,512)])}]])}}]);